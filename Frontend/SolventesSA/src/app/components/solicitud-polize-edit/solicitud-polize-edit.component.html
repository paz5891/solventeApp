<form [formGroup]="formDataPollicy" (ngSubmit)="onSubmit()">
    <div class="example-container">
        <mat-card class="example-card">
            <mat-card-header>
                    <mat-card-title>Editar Poliza</mat-card-title>
            </mat-card-header>
            <mat-card-content>
                <div fxFlex="100">
                    <div fxLayout="row">
                        <mat-form-field appearance="fill">
                            <mat-label>Fiado</mat-label>
                            <input type="text" matInput placeholder="Fiado" formControlName="id_trust" [matAutocomplete]="autoGroup" required>
                            <mat-autocomplete #autoGroup="matAutocomplete">
                                <mat-optgroup *ngFor="let group of trustGroupOptions | async" [label]="group.type_person">
                                    <mat-option *ngFor="let trust of group.objectToFilter" [value]="trust.id">
                                        {{trust.id}} - {{trust.name}}
                                    </mat-option>
                                </mat-optgroup>
                            </mat-autocomplete>
                            <mat-error *ngIf="formDataPollicy.get('id_trust').hasError('required')">
                                El fiado es <strong>requerido</strong>
                            </mat-error>
                        </mat-form-field>
                    </div>
                    <div fxLayout="row">
                        <mat-form-field appearance="fill">
                            <mat-label>Agente</mat-label>
                            <input type="text" matInput placeholder="Agente" formControlName="id_agent" [matAutocomplete]="auto1" required>
                            <mat-autocomplete #auto1="matAutocomplete">
                                <mat-option *ngFor="let agent of agentOptions | async" [value]="agent.id">
                                    {{agent.id}} - {{agent.name}}
                                </mat-option>
                            </mat-autocomplete>
                            <mat-error *ngIf="formDataPollicy.get('id_agent').hasError('required')">
                                El agente es <strong>requerido</strong>
                            </mat-error>
                        </mat-form-field>
                    </div>
                    <div fxLayout="row">
                        <mat-form-field appearance="fill">
                            <mat-label>Usuario</mat-label>
                            <input type="text" matInput placeholder="Usuario" formControlName="id_user" [matAutocomplete]="auto2" required>
                            <mat-autocomplete #auto2="matAutocomplete">
                                <mat-option *ngFor="let user of userOptions | async" [value]="user.id">
                                    {{user.id}} - {{user.name}}
                                </mat-option>
                            </mat-autocomplete>
                            <mat-error *ngIf="formDataPollicy.get('id_user').hasError('required')">
                                El usuario es <strong>requerido</strong>
                            </mat-error>
                        </mat-form-field>
                    </div>
                    <div fxLayout="row">
                        <mat-form-field appearance="fill">
                            <mat-label>Ramo</mat-label>
                            <mat-select placeholder="Ramo" formControlName="id_bouquet" [(value)]="selectedBouquet" (valueChange)="onChange()" required>
                                <mat-option *ngFor="let bouquet of bouquets" [value]="bouquet.id_bouquet">
                                    {{ bouquet.bouquet }}
                                </mat-option>
                            </mat-select>
                            <mat-error *ngIf="formDataPollicy.get('id_bouquet').hasError('required')">
                                El ramo es <strong>requerido</strong>
                            </mat-error>
                        </mat-form-field>
                    </div>
                    <div fxLayout="row">
                        <mat-form-field appearance="fill">
                            <mat-label>Tipo Ramo</mat-label>
                            <mat-select placeholder="Tipo Ramo" formControlName="id_bouquet_type" required>
                                <mat-option *ngFor="let bouquetType of bouquetsType" [value]="bouquetType.id_bouquet_type">
                                    {{ bouquetType.bouquet_type }}
                                </mat-option>
                            </mat-select>
                            <mat-error *ngIf="formDataPollicy.get('id_bouquet_type').hasError('required')">
                                El tipo de ramo es <strong>requerido</strong>
                            </mat-error>
                        </mat-form-field>
                    </div>
                    <div fxLayout="row">
                        <mat-form-field appearance="fill">
                            <mat-label>Periodo SIB</mat-label>
                            <input type="text" matInput placeholder="Periodo SIB" formControlName="id_sib_period" [matAutocomplete]="auto3" required>
                            <mat-autocomplete #auto3="matAutocomplete">
                                <mat-option *ngFor="let sibPeriod of sibPeriodOptions | async" [value]="sibPeriod.id">
                                    {{sibPeriod.id}} - {{sibPeriod.name}}
                                </mat-option>
                            </mat-autocomplete>
                            <mat-error *ngIf="formDataPollicy.get('id_sib_period').hasError('required')">
                                El periodo de emision es <strong>requerido</strong>
                            </mat-error>
                        </mat-form-field>
                    </div>
                    <div fxLayout="row">
                        <mat-form-field appearance="fill">
                            <mat-label>Prima</mat-label>
                            <input matInput placeholder="Prima" type="number" formControlName="prima" required>
                            <mat-error *ngIf="formDataPollicy.get('prima').hasError('required')">
                                La prima es <strong>requerida</strong>
                            </mat-error>
                        </mat-form-field>
                    </div>
                    <div fxLayout="row">
                        <mat-form-field appearance="fill">
                            <mat-label>Monto Contrato</mat-label>
                            <input matInput placeholder="Monto Contrato" type="number" formControlName="contract_amount" required>
                            <mat-error *ngIf="formDataPollicy.get('contract_amount').hasError('required')">
                                El monto del contrato es <strong>requerido</strong>
                            </mat-error>
                        </mat-form-field>
                    </div>
                    <div fxLayout="row">
                        <mat-form-field appearance="fill">
                            <mat-label>Monto Asegurado</mat-label>
                            <input matInput placeholder="Monto Asegurado" type="number" formControlName="insured_amount" required>
                            <mat-error *ngIf="formDataPollicy.get('insured_amount').hasError('required')">
                                El monto asegurado es <strong>requerido</strong>
                            </mat-error>
                        </mat-form-field>
                    </div>
                    <div fxLayout="row">
                        <mat-form-field appearance="fill">
                            <mat-label>IVA</mat-label>
                            <input matInput placeholder="IVA" type="number" formControlName="iva" required>
                            <mat-error *ngIf="formDataPollicy.get('iva').hasError('required')">
                                El iva es <strong>requerido</strong>
                            </mat-error>
                        </mat-form-field>
                    </div>
                    <div fxLayout="row">
                        <mat-form-field appearance="fill">
                            <mat-label>Derecho de Emision</mat-label>
                            <input matInput placeholder="Derecho de Emision" type="number" formControlName="emission_rights" required>
                            <mat-error *ngIf="formDataPollicy.get('emission_rights').hasError('required')">
                                El drecho de emision es <strong>requerido</strong>
                            </mat-error>
                        </mat-form-field>
                    </div>
                    <div fxLayout="row">
                        <mat-form-field appearance="fill">
                            <mat-label>Financiacion</mat-label>
                            <input matInput placeholder="Financiacion" type="number" formControlName="financing_surcharges" required>
                            <mat-error *ngIf="formDataPollicy.get('financing_surcharges').hasError('required')">
                                La financiacion es <strong>requerida</strong>
                            </mat-error>
                        </mat-form-field>
                    </div>
                    <div fxLayout="row">
                        <mat-form-field appearance="fill">
                            <mat-label>Valor</mat-label>
                            <input matInput placeholder="Valor" type="number" formControlName="validity" required>
                            <mat-error *ngIf="formDataPollicy.get('validity').hasError('required')">
                                El valor es <strong>requerido</strong>
                            </mat-error>
                        </mat-form-field>
                    </div>
                </div>
            </mat-card-content>
            <mat-card-footer>
                <mat-card-actions>
                    <div class="example-container">
                        <button mat-button (click)="onCancel()">Cancelar </button>
                        <button mat-raised-button color="primary" cdkFocusInitial (click)="onSubmit()" >Guardar</button>
                    </div>
                </mat-card-actions>
            </mat-card-footer>
        </mat-card>
        
    </div>
</form>